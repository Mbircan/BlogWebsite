@model List<BW.Models.Entities.Article>
@using BW.BLL.Account
@using BW.BLL.Repository
@using BW.Models.IdentityModels
@using Microsoft.AspNet.Identity
@{
	var userStore = MembershipTools.NewUserStore();
	var userManager = new UserManager<ApplicationUser>(userStore);
	var user = userManager.FindById(HttpContext.Current.User.Identity.GetUserId());
	var currentRole = "Passive";
	if (user != null)
	{

		currentRole = userManager.GetRoles(user.Id).FirstOrDefault();
	}
}
@{
	ViewBag.Title = "Index";
	Layout = "~/Views/Shared/_MainLayout.cshtml";
}
@section share{
	<style>
		.share-btn {
			display: inline-block;
			color: #ffffff;
			border: none;
			padding: 0.5em;
			width: 4em;
			box-shadow: 0 2px 0 0 rgba(0,0,0,0.2);
			outline: none;
			text-align: center;
		}

			.share-btn:hover {
				color: #eeeeee;
			}

			.share-btn:active {
				position: relative;
				top: 2px;
				box-shadow: none;
				color: #e2e2e2;
				outline: none;
			}

			.share-btn.twitter {
				background: #55acee;
			}

			.share-btn.google-plus {
				background: #dd4b39;
			}

			.share-btn.facebook {
				background: #3B5998;
			}

			.share-btn.stumbleupon {
				background: #EB4823;
			}

			.share-btn.reddit {
				background: #ff5700;
			}

			.share-btn.linkedin {
				background: #4875B4;
			}

			.share-btn.email {
				background: #444444;
			}
	</style>
}
<div class="row">
	<div class="col-md-12">
		@if (currentRole != "Passive")
		{
			<a class="btn btn-info btn-lg" href="@Url.Action("Insert","Article")">Makale Yaz</a>
		}
	</div>
</div>
@foreach (var item in Model.Take(10))
{
	<div class="box1">
		<h3><a href="@Url.Action("Index", "Article", new {id = item.ArticleId,route=item.Header.Replace(' ','-')})">@item.Header</a></h3>
		<span>
			Yazar: @item.User.Name @item.User.Surname<span style="font-size: medium">
				<img src="~/images/likes.png" />@item.LikeCount
			</span>
			@if (user != null)
			{
				var liked = new Repository.LikeRepo().Queryable().Where(x => x.UserId == user.Id && x.ArticleId == item.ArticleId).Any();
				if (!liked)
				{
					<a class="btn btn-primary" href="@Url.Action("Like","Article",new{id=item.ArticleId,uid=user.Id})">Beğen</a>
				}
				else
				{
					<a class="btn btn-danger" href="@Url.Action("Dislike","Article",new{id=item.ArticleId,uid=user.Id})">Beğenmekten Vazgeç</a>
				}
			}
		</span>
		<div class="data">
			<p>@item.Content</p>
			<span><a href="@Url.Action("Index", "Article", new {id = item.ArticleId,route=item.Header.Replace(' ','-')})">Devamını Oku>>></a></span>
			<a href="http://twitter.com/share?url=<URL>&text=@(item.Content)&via=mbircan9" target="_blank" class="share-btn twitter">
				<i class="fa fa-twitter"></i>
			</a>

			<!-- Google Plus -->
			<a href="https://plus.google.com/share?url=<BTN>" target="_blank" class="share-btn google-plus">
				<i class="fa fa-google-plus"></i>
			</a>

			<!-- Facebook -->
			<a href="http://www.facebook.com/sharer/sharer.php?u=<URL>" target="_blank" class="share-btn facebook">
				<i class="fa fa-facebook"></i>
			</a>
		</div>
		<div class="clear"></div>
	</div>
}
<div class="page_links">
	<div class="next_button">
		<a href="#">İleri</a>
	</div>
	<div class="page_numbers">
		<ul>
			@for (int i = 1; i <= (ViewBag.count/10)+1; i++)
			{
				<li><a href="@Url.Action("Index","Home",new{id=i})">@i</a></li>
			}
		</ul>
	</div>
	<div class="clear"></div>
	<div class="page_bottom">
		<p>Geri Git: <a href="#">Yukarı</a> | <a href="#">Ana Sayfa</a></p>
	</div>
	<div class="clear"></div>
</div>

